listener 1883
allow_anonymous true

# 메시지 동기화 개선을 위한 설정
max_inflight_messages 20
max_queued_messages 100
message_size_limit 8192

# QoS 1,2 메시지를 위한 persistence 활성화  
persistence true
persistence_location /mosquitto/data/

# 연결 유지 및 타임아웃 설정
keepalive_interval 60
max_keepalive 65535

# 로그 레벨 설정 (디버깅용)
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning  
log_type notice
log_type information

# 클라이언트 연결 수 제한
max_connections -1
